-- ===============================================================
-- üß≠ MAPEAMENTO COMPLETO DA ESTRUTURA DO BANCO DE DADOS
-- ===============================================================
-- Execute estas queries para obter uma radiografia completa do banco.
-- Isso listar√° schemas, tabelas, colunas, tipos, fun√ß√µes e triggers.

-- 1. LISTAR TODOS OS SCHEMAS (Exceto sistema)
SELECT schema_name 
FROM information_schema.schemata 
WHERE schema_name NOT IN ('information_schema', 'pg_catalog', 'pg_toast')
  AND schema_name NOT LIKE 'pg_%'
ORDER BY schema_name;

| schema_name    |
| -------------- |
| analytics      |
| api            |
| auth           |
| commercial     |
| extensions     |
| graphql        |
| graphql_public |
| integration    |
| lens_catalog   |
| logistics      |
| meta_system    |
| orders         |
| public         |
| public_api     |
| realtime       |
| scoring        |
| storage        |
| suppliers      |
| vault          |


-- 2. LISTAR TODAS AS TABELAS (Agrupadas por Schema)
SELECT 
    table_schema, 
    table_name, 
    table_type
FROM information_schema.tables 
WHERE table_schema NOT IN ('information_schema', 'pg_catalog')
ORDER BY table_schema, table_name;

| table_schema | table_name                    | table_type |
| ------------ | ----------------------------- | ---------- |
| analytics    | alertas_analytics             | BASE TABLE |
| analytics    | execucoes_relatorios          | BASE TABLE |
| analytics    | metricas_kpi                  | BASE TABLE |
| analytics    | relatorios_configuracao       | BASE TABLE |
| analytics    | valores_kpi                   | BASE TABLE |
| auth         | audit_log_entries             | BASE TABLE |
| auth         | flow_state                    | BASE TABLE |
| auth         | identities                    | BASE TABLE |
| auth         | instances                     | BASE TABLE |
| auth         | mfa_amr_claims                | BASE TABLE |
| auth         | mfa_challenges                | BASE TABLE |
| auth         | mfa_factors                   | BASE TABLE |
| auth         | oauth_authorizations          | BASE TABLE |
| auth         | oauth_client_states           | BASE TABLE |
| auth         | oauth_clients                 | BASE TABLE |
| auth         | oauth_consents                | BASE TABLE |
| auth         | one_time_tokens               | BASE TABLE |
| auth         | refresh_tokens                | BASE TABLE |
| auth         | saml_providers                | BASE TABLE |
| auth         | saml_relay_states             | BASE TABLE |
| auth         | schema_migrations             | BASE TABLE |
| auth         | sessions                      | BASE TABLE |
| auth         | sso_domains                   | BASE TABLE |
| auth         | sso_providers                 | BASE TABLE |
| auth         | users                         | BASE TABLE |
| commercial   | descontos                     | BASE TABLE |
| commercial   | historico_precos              | BASE TABLE |
| commercial   | precos_base                   | BASE TABLE |
| extensions   | pg_stat_statements            | VIEW       |
| extensions   | pg_stat_statements_info       | VIEW       |
| integration  | clientes_api                  | BASE TABLE |
| integration  | eventos_webhook               | BASE TABLE |
| lens_catalog | grades_disponibilidade        | BASE TABLE |
| lens_catalog | homologacao_marca_propria     | BASE TABLE |
| lens_catalog | lentes                        | BASE TABLE |
| lens_catalog | lentes_canonicas              | BASE TABLE |
| lens_catalog | lentes_premium                | BASE TABLE |
| lens_catalog | marcas                        | BASE TABLE |
| lens_catalog | vw_opcoes_marca_propria       | VIEW       |
| logistics    | historico_entregas            | BASE TABLE |
| logistics    | tabela_prazos                 | BASE TABLE |
| logistics    | zonas_entrega                 | BASE TABLE |
| meta_system  | feature_flags                 | BASE TABLE |
| meta_system  | parametros_tenant             | BASE TABLE |
| meta_system  | tenants                       | BASE TABLE |
| orders       | alternativas_cotacao          | BASE TABLE |
| orders       | criterios_decisao             | BASE TABLE |
| orders       | decisoes_lentes               | BASE TABLE |
| orders       | historico_status              | BASE TABLE |
| public       | clientes                      | BASE TABLE |
| public       | configuracoes                 | BASE TABLE |
| public       | consultas_lens_log            | BASE TABLE |
| public       | decisoes_compra               | VIEW       |
| public       | logs                          | BASE TABLE |
| public       | lojas                         | BASE TABLE |
| public       | mv_economia_por_fornecedor    | VIEW       |
| public       | produtos_bestlens             | BASE TABLE |
| public       | produtos_laboratorio          | VIEW       |
| public       | relatorios                    | BASE TABLE |
| public       | usuarios                      | BASE TABLE |
| public       | v_dashboard_vouchers          | VIEW       |
| public       | vw_fornecedores               | VIEW       |
| public       | vw_fornecedores_disponiveis   | VIEW       |
| public       | vw_lentes_catalogo            | VIEW       |
| public       | vw_ranking_opcoes             | VIEW       |
| public       | vw_todas_lentes               | VIEW       |
| public       | vw_usuarios                   | VIEW       |
| realtime     | messages                      | BASE TABLE |
| realtime     | schema_migrations             | BASE TABLE |
| realtime     | subscription                  | BASE TABLE |
| scoring      | avaliacoes_laboratorios       | BASE TABLE |
| scoring      | criterios_scoring             | BASE TABLE |
| scoring      | historico_scores              | BASE TABLE |
| scoring      | scores_laboratorios           | BASE TABLE |
| storage      | buckets                       | BASE TABLE |
| storage      | buckets_analytics             | BASE TABLE |
| storage      | buckets_vectors               | BASE TABLE |
| storage      | migrations                    | BASE TABLE |
| storage      | objects                       | BASE TABLE |
| storage      | prefixes                      | BASE TABLE |
| storage      | s3_multipart_uploads          | BASE TABLE |
| storage      | s3_multipart_uploads_parts    | BASE TABLE |
| storage      | vector_indexes                | BASE TABLE |
| suppliers    | historico_produtos            | BASE TABLE |
| suppliers    | laboratorio_sla_personalizado | BASE TABLE |
| suppliers    | laboratorios                  | BASE TABLE |
| suppliers    | marcas                        | BASE TABLE |
| suppliers    | produtos_laboratorio          | BASE TABLE |
| suppliers    | tipos_produto_config          | BASE TABLE |
| suppliers    | tratamentos_config            | BASE TABLE |
| vault        | decrypted_secrets             | VIEW       |
| vault        | secrets                       | BASE TABLE |


-- 3. DETALHAR ESTRUTURA DAS TABELAS (Colunas e Tipos)
-- ‚ö†Ô∏è Pode retornar muitas linhas. Use filtro se necess√°rio.
SELECT 
    table_schema, 
    table_name, 
    column_name, 
    data_type, 
    is_nullable,
    column_default
FROM information_schema.columns 
WHERE table_schema NOT IN ('information_schema', 'pg_catalog')
ORDER BY table_schema, table_name, ordinal_position;

| table_schema | table_name              | column_name            | data_type                | is_nullable | column_default        |
| ------------ | ----------------------- | ---------------------- | ------------------------ | ----------- | --------------------- |
| analytics    | alertas_analytics       | id                     | uuid                     | NO          | uuid_generate_v4()    |
| analytics    | alertas_analytics       | tenant_id              | uuid                     | NO          | null                  |
| analytics    | alertas_analytics       | metrica_id             | uuid                     | NO          | null                  |
| analytics    | alertas_analytics       | tipo_alerta            | text                     | NO          | null                  |
| analytics    | alertas_analytics       | valor_trigger          | numeric                  | NO          | null                  |
| analytics    | alertas_analytics       | valor_atual            | numeric                  | NO          | null                  |
| analytics    | alertas_analytics       | percentual_desvio      | numeric                  | YES         | null                  |
| analytics    | alertas_analytics       | disparado_em           | timestamp with time zone | NO          | now()                 |
| analytics    | alertas_analytics       | resolvido_em           | timestamp with time zone | YES         | null                  |
| analytics    | alertas_analytics       | ativo                  | boolean                  | NO          | true                  |
| analytics    | execucoes_relatorios    | id                     | uuid                     | NO          | uuid_generate_v4()    |
| analytics    | execucoes_relatorios    | tenant_id              | uuid                     | NO          | null                  |
| analytics    | execucoes_relatorios    | relatorio_id           | uuid                     | NO          | null                  |
| analytics    | execucoes_relatorios    | parametros_usados      | jsonb                    | YES         | '{}'::jsonb           |
| analytics    | execucoes_relatorios    | resultado              | jsonb                    | YES         | null                  |
| analytics    | execucoes_relatorios    | tempo_execucao_ms      | integer                  | YES         | null                  |
| analytics    | execucoes_relatorios    | linhas_retornadas      | integer                  | YES         | null                  |
| analytics    | execucoes_relatorios    | executado_por          | uuid                     | YES         | null                  |
| analytics    | execucoes_relatorios    | executado_em           | timestamp with time zone | NO          | now()                 |
| analytics    | execucoes_relatorios    | sucesso                | boolean                  | NO          | true                  |
| analytics    | execucoes_relatorios    | erro                   | text                     | YES         | null                  |
| analytics    | metricas_kpi            | id                     | uuid                     | NO          | uuid_generate_v4()    |
| analytics    | metricas_kpi            | tenant_id              | uuid                     | NO          | null                  |
| analytics    | metricas_kpi            | nome                   | text                     | NO          | null                  |
| analytics    | metricas_kpi            | descricao              | text                     | YES         | null                  |
| analytics    | metricas_kpi            | unidade                | text                     | YES         | null                  |
| analytics    | metricas_kpi            | meta_valor             | numeric                  | YES         | null                  |
| analytics    | metricas_kpi            | ativo                  | boolean                  | NO          | true                  |
| analytics    | metricas_kpi            | criado_em              | timestamp with time zone | NO          | now()                 |
| analytics    | relatorios_configuracao | id                     | uuid                     | NO          | uuid_generate_v4()    |
| analytics    | relatorios_configuracao | tenant_id              | uuid                     | NO          | null                  |
| analytics    | relatorios_configuracao | nome                   | text                     | NO          | null                  |
| analytics    | relatorios_configuracao | descricao              | text                     | YES         | null                  |
| analytics    | relatorios_configuracao | query_sql              | text                     | NO          | null                  |
| analytics    | relatorios_configuracao | parametros_esperados   | jsonb                    | YES         | '[]'::jsonb           |
| analytics    | relatorios_configuracao | frequencia_atualizacao | text                     | YES         | null                  |
| analytics    | relatorios_configuracao | ativo                  | boolean                  | NO          | true                  |
| analytics    | relatorios_configuracao | criado_em              | timestamp with time zone | NO          | now()                 |
| analytics    | valores_kpi             | id                     | uuid                     | NO          | uuid_generate_v4()    |
| analytics    | valores_kpi             | tenant_id              | uuid                     | NO          | null                  |
| analytics    | valores_kpi             | metrica_id             | uuid                     | NO          | null                  |
| analytics    | valores_kpi             | periodo_inicio         | date                     | NO          | null                  |
| analytics    | valores_kpi             | periodo_fim            | date                     | NO          | null                  |
| analytics    | valores_kpi             | valor                  | numeric                  | NO          | null                  |
| analytics    | valores_kpi             | calculado_em           | timestamp with time zone | NO          | now()                 |
| auth         | audit_log_entries       | instance_id            | uuid                     | YES         | null                  |
| auth         | audit_log_entries       | id                     | uuid                     | NO          | null                  |
| auth         | audit_log_entries       | payload                | json                     | YES         | null                  |
| auth         | audit_log_entries       | created_at             | timestamp with time zone | YES         | null                  |
| auth         | audit_log_entries       | ip_address             | character varying        | NO          | ''::character varying |
| auth         | flow_state              | id                     | uuid                     | NO          | null                  |
| auth         | flow_state              | user_id                | uuid                     | YES         | null                  |
| auth         | flow_state              | auth_code              | text                     | NO          | null                  |
| auth         | flow_state              | code_challenge_method  | USER-DEFINED             | NO          | null                  |
| auth         | flow_state              | code_challenge         | text                     | NO          | null                  |
| auth         | flow_state              | provider_type          | text                     | NO          | null                  |
| auth         | flow_state              | provider_access_token  | text                     | YES         | null                  |
| auth         | flow_state              | provider_refresh_token | text                     | YES         | null                  |
| auth         | flow_state              | created_at             | timestamp with time zone | YES         | null                  |
| auth         | flow_state              | updated_at             | timestamp with time zone | YES         | null                  |
| auth         | flow_state              | authentication_method  | text                     | NO          | null                  |
| auth         | flow_state              | auth_code_issued_at    | timestamp with time zone | YES         | null                  |
| auth         | identities              | provider_id            | text                     | NO          | null                  |
| auth         | identities              | user_id                | uuid                     | NO          | null                  |
| auth         | identities              | identity_data          | jsonb                    | NO          | null                  |
| auth         | identities              | provider               | text                     | NO          | null                  |
| auth         | identities              | last_sign_in_at        | timestamp with time zone | YES         | null                  |
| auth         | identities              | created_at             | timestamp with time zone | YES         | null                  |
| auth         | identities              | updated_at             | timestamp with time zone | YES         | null                  |
| auth         | identities              | email                  | text                     | YES         | null                  |
| auth         | identities              | id                     | uuid                     | NO          | gen_random_uuid()     |
| auth         | instances               | id                     | uuid                     | NO          | null                  |
| auth         | instances               | uuid                   | uuid                     | YES         | null                  |
| auth         | instances               | raw_base_config        | text                     | YES         | null                  |
| auth         | instances               | created_at             | timestamp with time zone | YES         | null                  |
| auth         | instances               | updated_at             | timestamp with time zone | YES         | null                  |
| auth         | mfa_amr_claims          | session_id             | uuid                     | NO          | null                  |
| auth         | mfa_amr_claims          | created_at             | timestamp with time zone | NO          | null                  |
| auth         | mfa_amr_claims          | updated_at             | timestamp with time zone | NO          | null                  |
| auth         | mfa_amr_claims          | authentication_method  | text                     | NO          | null                  |
| auth         | mfa_amr_claims          | id                     | uuid                     | NO          | null                  |
| auth         | mfa_challenges          | id                     | uuid                     | NO          | null                  |
| auth         | mfa_challenges          | factor_id              | uuid                     | NO          | null                  |
| auth         | mfa_challenges          | created_at             | timestamp with time zone | NO          | null                  |
| auth         | mfa_challenges          | verified_at            | timestamp with time zone | YES         | null                  |
| auth         | mfa_challenges          | ip_address             | inet                     | NO          | null                  |
| auth         | mfa_challenges          | otp_code               | text                     | YES         | null                  |
| auth         | mfa_challenges          | web_authn_session_data | jsonb                    | YES         | null                  |
| auth         | mfa_factors             | id                     | uuid                     | NO          | null                  |
| auth         | mfa_factors             | user_id                | uuid                     | NO          | null                  |
| auth         | mfa_factors             | friendly_name          | text                     | YES         | null                  |
| auth         | mfa_factors             | factor_type            | USER-DEFINED             | NO          | null                  |
| auth         | mfa_factors             | status                 | USER-DEFINED             | NO          | null                  |
| auth         | mfa_factors             | created_at             | timestamp with time zone | NO          | null                  |
| auth         | mfa_factors             | updated_at             | timestamp with time zone | NO          | null                  |
| auth         | mfa_factors             | secret                 | text                     | YES         | null                  |
| auth         | mfa_factors             | phone                  | text                     | YES         | null                  |
| auth         | mfa_factors             | last_challenged_at     | timestamp with time zone | YES         | null                  |
| auth         | mfa_factors             | web_authn_credential   | jsonb                    | YES         | null                  |
| auth         | mfa_factors             | web_authn_aaguid       | uuid                     | YES         | null                  |



-- 4. LISTAR TODAS AS VIEWS
SELECT 
    table_schema, 
    table_name, 
    is_updatable
FROM information_schema.views
WHERE table_schema NOT IN ('information_schema', 'pg_catalog')
ORDER BY table_schema, table_name;

| table_schema | table_name                  | is_updatable |
| ------------ | --------------------------- | ------------ |
| extensions   | pg_stat_statements          | NO           |
| extensions   | pg_stat_statements_info     | NO           |
| lens_catalog | vw_opcoes_marca_propria     | NO           |
| public       | decisoes_compra             | YES          |
| public       | mv_economia_por_fornecedor  | NO           |
| public       | produtos_laboratorio        | NO           |
| public       | v_dashboard_vouchers        | NO           |
| public       | vw_fornecedores             | NO           |
| public       | vw_fornecedores_disponiveis | YES          |
| public       | vw_lentes_catalogo          | NO           |
| public       | vw_ranking_opcoes           | NO           |
| public       | vw_todas_lentes             | NO           |
| public       | vw_usuarios                 | YES          |
| vault        | decrypted_secrets           | YES          |


-- 5. LISTAR ENUMS E TIPOS PERSONALIZADOS
SELECT 
    n.nspname AS schema,
    t.typname AS type_name,
    e.enumlabel AS value
FROM pg_type t 
JOIN pg_enum e ON t.oid = e.enumtypid  
JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace
ORDER BY schema, type_name, value;

| schema   | type_name                  | value                      |
| -------- | -------------------------- | -------------------------- |
| auth     | aal_level                  | aal1                       |
| auth     | aal_level                  | aal2                       |
| auth     | aal_level                  | aal3                       |
| auth     | code_challenge_method      | plain                      |
| auth     | code_challenge_method      | s256                       |
| auth     | factor_status              | unverified                 |
| auth     | factor_status              | verified                   |
| auth     | factor_type                | phone                      |
| auth     | factor_type                | totp                       |
| auth     | factor_type                | webauthn                   |
| auth     | oauth_authorization_status | approved                   |
| auth     | oauth_authorization_status | denied                     |
| auth     | oauth_authorization_status | expired                    |
| auth     | oauth_authorization_status | pending                    |
| auth     | oauth_client_type          | confidential               |
| auth     | oauth_client_type          | public                     |
| auth     | oauth_registration_type    | dynamic                    |
| auth     | oauth_registration_type    | manual                     |
| auth     | oauth_response_type        | code                       |
| auth     | one_time_token_type        | confirmation_token         |
| auth     | one_time_token_type        | email_change_token_current |
| auth     | one_time_token_type        | email_change_token_new     |
| auth     | one_time_token_type        | phone_change_token         |
| auth     | one_time_token_type        | reauthentication_token     |
| auth     | one_time_token_type        | recovery_token             |
| public   | criterio_decisao           | ESPECIAL                   |
| public   | criterio_decisao           | NORMAL                     |
| public   | criterio_decisao           | URGENCIA                   |
| public   | material_lente             | CRISTAL                    |
| public   | material_lente             | HIGH_INDEX_160             |
| public   | material_lente             | HIGH_INDEX_167             |
| public   | material_lente             | HIGH_INDEX_174             |
| public   | material_lente             | ORGANICO                   |
| public   | material_lente             | POLICARBONATO              |
| public   | material_lente             | TRIVEX                     |
| public   | status_decisao             | CANCELADA                  |
| public   | status_decisao             | CONFIRMADA                 |
| public   | status_decisao             | ENTREGUE                   |
| public   | status_decisao             | PENDENTE                   |
| public   | tipo_fotossensivel_enum    | GENERICO                   |
| public   | tipo_fotossensivel_enum    | SENSITY                    |
| public   | tipo_fotossensivel_enum    | SUNSYNC                    |
| public   | tipo_fotossensivel_enum    | TRANSITIONS                |
| public   | tipo_fotossensivel_enum    | XTRACTIVE                  |
| public   | tipo_lente                 | BIFOCAL                    |
| public   | tipo_lente                 | MONOFOCAL                  |
| public   | tipo_lente                 | PROGRESSIVA                |
| public   | tratamento_lente           | AR                         |
| public   | tratamento_lente           | AR_PREMIUM                 |
| public   | tratamento_lente           | AR_STANDARD                |
| public   | tratamento_lente           | BLUE                       |
| public   | tratamento_lente           | BLUE_CUT                   |
| public   | tratamento_lente           | FOTO                       |
| public   | tratamento_lente           | HC                         |
| public   | tratamento_lente           | POLAR                      |
| public   | tratamento_lente           | UV400                      |
| public   | user_role_enum             | admin_junior               |
| public   | user_role_enum             | dcl_decisor                |
| public   | user_role_enum             | financeiro_supervisor      |
| public   | user_role_enum             | loja_consulta              |
| realtime | action                     | DELETE                     |
| realtime | action                     | ERROR                      |
| realtime | action                     | INSERT                     |
| realtime | action                     | TRUNCATE                   |
| realtime | action                     | UPDATE                     |
| realtime | equality_op                | eq                         |
| realtime | equality_op                | gt                         |
| realtime | equality_op                | gte                        |
| realtime | equality_op                | in                         |
| realtime | equality_op                | lt                         |
| realtime | equality_op                | lte                        |
| realtime | equality_op                | neq                        |
| storage  | buckettype                 | ANALYTICS                  |
| storage  | buckettype                 | STANDARD                   |
| storage  | buckettype                 | VECTOR                     |



-- 6. LISTAR FUN√á√ïES (PROCEDURES) CRIADAS
SELECT 
    n.nspname AS schema,
    p.proname AS function_name,
    pg_get_function_arguments(p.oid) AS arguments,
    t.typname AS return_type
FROM pg_proc p
JOIN pg_namespace n ON p.pronamespace = n.oid
LEFT JOIN pg_type t ON p.prorettype = t.oid
WHERE n.nspname NOT IN ('information_schema', 'pg_catalog')
ORDER BY schema, function_name;

| schema         | function_name                             | arguments                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | return_type   |
| -------------- | ----------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------- |
| api            | buscar_lentes                             | p_query text, p_limit integer DEFAULT 20                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | record        |
| api            | criar_decisao_lente                       | p_lente_id uuid, p_laboratorio_id uuid, p_criterio criterio_decisao, p_preco_final numeric, p_prazo_estimado integer, p_custo_frete numeric DEFAULT 0, p_motivo text DEFAULT NULL::text, p_alternativas jsonb DEFAULT '[]'::jsonb                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | uuid          |
| api            | listar_laboratorios                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | record        |
| api            | obter_dashboard_kpis                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | record        |
| api            | obter_decisao                             | p_decisao_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | record        |
| api            | obter_laboratorio                         | p_laboratorio_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | record        |
| api            | obter_lente                               | p_lente_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | record        |
| auth           | email                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | text          |
| auth           | jwt                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | jsonb         |
| auth           | role                                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | text          |
| auth           | uid                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid          |
| commercial     | log_preco_alteracao                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger       |
| extensions     | armor                                     | bytea, text[], text[]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | text          |
| extensions     | armor                                     | bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | text          |
| extensions     | crypt                                     | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | text          |
| extensions     | dearmor                                   | text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | bytea         |
| extensions     | decrypt                                   | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | bytea         |
| extensions     | decrypt_iv                                | bytea, bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | bytea         |
| extensions     | digest                                    | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | bytea         |
| extensions     | digest                                    | bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | bytea         |
| extensions     | encrypt                                   | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | bytea         |
| extensions     | encrypt_iv                                | bytea, bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | bytea         |
| extensions     | gen_random_bytes                          | integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | bytea         |
| extensions     | gen_random_uuid                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid          |
| extensions     | gen_salt                                  | text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | text          |
| extensions     | gen_salt                                  | text, integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | text          |
| extensions     | grant_pg_cron_access                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | event_trigger |
| extensions     | grant_pg_graphql_access                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | event_trigger |
| extensions     | grant_pg_net_access                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | event_trigger |
| extensions     | hmac                                      | text, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | bytea         |
| extensions     | hmac                                      | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | bytea         |
| extensions     | pg_stat_statements                        | showtext boolean, OUT userid oid, OUT dbid oid, OUT toplevel boolean, OUT queryid bigint, OUT query text, OUT plans bigint, OUT total_plan_time double precision, OUT min_plan_time double precision, OUT max_plan_time double precision, OUT mean_plan_time double precision, OUT stddev_plan_time double precision, OUT calls bigint, OUT total_exec_time double precision, OUT min_exec_time double precision, OUT max_exec_time double precision, OUT mean_exec_time double precision, OUT stddev_exec_time double precision, OUT rows bigint, OUT shared_blks_hit bigint, OUT shared_blks_read bigint, OUT shared_blks_dirtied bigint, OUT shared_blks_written bigint, OUT local_blks_hit bigint, OUT local_blks_read bigint, OUT local_blks_dirtied bigint, OUT local_blks_written bigint, OUT temp_blks_read bigint, OUT temp_blks_written bigint, OUT shared_blk_read_time double precision, OUT shared_blk_write_time double precision, OUT local_blk_read_time double precision, OUT local_blk_write_time double precision, OUT temp_blk_read_time double precision, OUT temp_blk_write_time double precision, OUT wal_records bigint, OUT wal_fpi bigint, OUT wal_bytes numeric, OUT jit_functions bigint, OUT jit_generation_time double precision, OUT jit_inlining_count bigint, OUT jit_inlining_time double precision, OUT jit_optimization_count bigint, OUT jit_optimization_time double precision, OUT jit_emission_count bigint, OUT jit_emission_time double precision, OUT jit_deform_count bigint, OUT jit_deform_time double precision, OUT stats_since timestamp with time zone, OUT minmax_stats_since timestamp with time zone | record        |
| extensions     | pg_stat_statements_info                   | OUT dealloc bigint, OUT stats_reset timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | record        |
| extensions     | pg_stat_statements_reset                  | userid oid DEFAULT 0, dbid oid DEFAULT 0, queryid bigint DEFAULT 0, minmax_only boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | timestamptz   |
| extensions     | pgp_armor_headers                         | text, OUT key text, OUT value text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | record        |
| extensions     | pgp_key_id                                | bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | text          |
| extensions     | pgp_pub_decrypt                           | bytea, bytea, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | text          |
| extensions     | pgp_pub_decrypt                           | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | text          |
| extensions     | pgp_pub_decrypt                           | bytea, bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | text          |
| extensions     | pgp_pub_decrypt_bytea                     | bytea, bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | bytea         |
| extensions     | pgp_pub_decrypt_bytea                     | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | bytea         |
| extensions     | pgp_pub_decrypt_bytea                     | bytea, bytea, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | bytea         |
| extensions     | pgp_pub_encrypt                           | text, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | bytea         |
| extensions     | pgp_pub_encrypt                           | text, bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | bytea         |
| extensions     | pgp_pub_encrypt_bytea                     | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | bytea         |
| extensions     | pgp_pub_encrypt_bytea                     | bytea, bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | bytea         |
| extensions     | pgp_sym_decrypt                           | bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | text          |
| extensions     | pgp_sym_decrypt                           | bytea, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | text          |
| extensions     | pgp_sym_decrypt_bytea                     | bytea, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | bytea         |
| extensions     | pgp_sym_decrypt_bytea                     | bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | bytea         |
| extensions     | pgp_sym_encrypt                           | text, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | bytea         |
| extensions     | pgp_sym_encrypt                           | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | bytea         |
| extensions     | pgp_sym_encrypt_bytea                     | bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | bytea         |
| extensions     | pgp_sym_encrypt_bytea                     | bytea, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | bytea         |
| extensions     | pgrst_ddl_watch                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | event_trigger |
| extensions     | pgrst_drop_watch                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | event_trigger |
| extensions     | set_graphql_placeholder                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | event_trigger |
| extensions     | uuid_generate_v1                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid          |
| extensions     | uuid_generate_v1mc                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid          |
| extensions     | uuid_generate_v3                          | namespace uuid, name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | uuid          |
| extensions     | uuid_generate_v4                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid          |
| extensions     | uuid_generate_v5                          | namespace uuid, name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | uuid          |
| extensions     | uuid_nil                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid          |
| extensions     | uuid_ns_dns                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid          |
| extensions     | uuid_ns_oid                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid          |
| extensions     | uuid_ns_url                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid          |
| extensions     | uuid_ns_x500                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid          |
| graphql        | _internal_resolve                         | query text, variables jsonb DEFAULT '{}'::jsonb, "operationName" text DEFAULT NULL::text, extensions jsonb DEFAULT NULL::jsonb                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | jsonb         |
| graphql        | comment_directive                         | comment_ text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | jsonb         |
| graphql        | exception                                 | message text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | text          |
| graphql        | get_schema_version                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | int4          |
| graphql        | increment_schema_version                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | event_trigger |
| graphql        | resolve                                   | query text, variables jsonb DEFAULT '{}'::jsonb, "operationName" text DEFAULT NULL::text, extensions jsonb DEFAULT NULL::jsonb                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | jsonb         |
| graphql_public | graphql                                   | "operationName" text DEFAULT NULL::text, query text DEFAULT NULL::text, variables jsonb DEFAULT NULL::jsonb, extensions jsonb DEFAULT NULL::jsonb                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | jsonb         |
| lens_catalog   | verificar_disponibilidade                 | p_lente_id uuid, p_esferico numeric, p_cilindrico numeric, p_adicao numeric DEFAULT 0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | bool          |
| meta_system    | current_tenant_id                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid          |
| meta_system    | update_updated_at_column                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger       |
| pgbouncer      | get_auth                                  | p_usename text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | record        |
| public         | api_login_usuario                         | p_email text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | jsonb         |
| public         | api_logout_usuario                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | jsonb         |
| public         | api_perfil_usuario                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | jsonb         |
| public         | api_trocar_senha                          | p_senha_atual text, p_senha_nova text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | jsonb         |
| public         | api_validar_login                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | jsonb         |
| public         | get_busca_stats                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | record        |
| public         | gin_extract_query_trgm                    | text, internal, smallint, internal, internal, internal, internal                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | internal      |
| public         | gin_extract_value_trgm                    | text, internal                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | internal      |
| public         | gin_trgm_consistent                       | internal, smallint, text, integer, internal, internal, internal, internal                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | bool          |
| public         | gin_trgm_triconsistent                    | internal, smallint, text, integer, internal, internal, internal                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | char          |
| public         | gtrgm_compress                            | internal                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | internal      |
| public         | gtrgm_consistent                          | internal, text, smallint, oid, internal                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | bool          |
| public         | gtrgm_decompress                          | internal                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | internal      |
| public         | gtrgm_distance                            | internal, text, smallint, oid, internal                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | float8        |
| public         | gtrgm_in                                  | cstring                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | gtrgm         |
| public         | gtrgm_options                             | internal                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | void          |
| public         | gtrgm_out                                 | gtrgm                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | cstring       |
| public         | gtrgm_penalty                             | internal, internal, internal                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | internal      |
| public         | gtrgm_picksplit                           | internal, internal                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | internal      |
| public         | gtrgm_same                                | gtrgm, gtrgm, internal                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | internal      |
| public         | gtrgm_union                               | internal, internal                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | gtrgm         |
| public         | rpc_buscar_lente                          | p_query text, p_limit integer DEFAULT 20                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | record        |
| public         | rpc_rank_opcoes                           | p_lente_id uuid, p_criterio text DEFAULT 'NORMAL'::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | record        |
| public         | set_limit                                 | real                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | float4        |
| public         | show_limit                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | float4        |
| public         | show_trgm                                 | text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | _text         |
| public         | similarity                                | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | float4        |
| public         | similarity_dist                           | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | float4        |
| public         | similarity_op                             | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | bool          |
| public         | strict_word_similarity                    | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | float4        |
| public         | strict_word_similarity_commutator_op      | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | bool          |
| public         | strict_word_similarity_dist_commutator_op | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | float4        |
| public         | strict_word_similarity_dist_op            | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | float4        |
| public         | strict_word_similarity_op                 | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | bool          |
| public         | update_updated_at_column                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger       |
| public         | usuario_tem_permissao                     | p_email text, p_permissao text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | bool          |
| public         | word_similarity                           | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | float4        |
| public         | word_similarity_commutator_op             | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | bool          |
| public         | word_similarity_dist_commutator_op        | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | float4        |
| public         | word_similarity_dist_op                   | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | float4        |
| public         | word_similarity_op                        | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | bool          |
| realtime       | apply_rls                                 | wal jsonb, max_record_bytes integer DEFAULT (1024 * 1024)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | wal_rls       |
| realtime       | broadcast_changes                         | topic_name text, event_name text, operation text, table_name text, table_schema text, new record, old record, level text DEFAULT 'ROW'::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | void          |
| realtime       | build_prepared_statement_sql              | prepared_statement_name text, entity regclass, columns realtime.wal_column[]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | text          |
| realtime       | cast                                      | val text, type_ regtype                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | jsonb         |
| realtime       | check_equality_op                         | op realtime.equality_op, type_ regtype, val_1 text, val_2 text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | bool          |
| realtime       | is_visible_through_filters                | columns realtime.wal_column[], filters realtime.user_defined_filter[]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | bool          |
| realtime       | list_changes                              | publication name, slot_name name, max_changes integer, max_record_bytes integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | wal_rls       |
| realtime       | quote_wal2json                            | entity regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | text          |
| realtime       | send                                      | payload jsonb, event text, topic text, private boolean DEFAULT true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | void          |
| realtime       | subscription_check_filters                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger       |
| realtime       | to_regrole                                | role_name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | regrole       |
| realtime       | topic                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | text          |
| storage        | add_prefixes                              | _bucket_id text, _name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | void          |
| storage        | can_insert_object                         | bucketid text, name text, owner uuid, metadata jsonb                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | void          |
| storage        | delete_leaf_prefixes                      | bucket_ids text[], names text[]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | void          |
| storage        | delete_prefix                             | _bucket_id text, _name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | bool          |
| storage        | delete_prefix_hierarchy_trigger           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger       |
| storage        | enforce_bucket_name_length                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger       |
| storage        | extension                                 | name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | text          |
| storage        | filename                                  | name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | text          |
| storage        | foldername                                | name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | _text         |
| storage        | get_level                                 | name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | int4          |
| storage        | get_prefix                                | name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | text          |
| storage        | get_prefixes                              | name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | _text         |
| storage        | get_size_by_bucket                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | record        |
| storage        | list_multipart_uploads_with_delimiter     | bucket_id text, prefix_param text, delimiter_param text, max_keys integer DEFAULT 100, next_key_token text DEFAULT ''::text, next_upload_token text DEFAULT ''::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | record        |
| storage        | list_objects_with_delimiter               | bucket_id text, prefix_param text, delimiter_param text, max_keys integer DEFAULT 100, start_after text DEFAULT ''::text, next_token text DEFAULT ''::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | record        |
| storage        | lock_top_prefixes                         | bucket_ids text[], names text[]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | void          |
| storage        | objects_delete_cleanup                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger       |
| storage        | objects_insert_prefix_trigger             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger       |
| storage        | objects_update_cleanup                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger       |
| storage        | objects_update_level_trigger              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger       |
| storage        | objects_update_prefix_trigger             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger       |
| storage        | operation                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | text          |
| storage        | prefixes_delete_cleanup                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger       |
| storage        | prefixes_insert_trigger                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger       |
| storage        | search                                    | prefix text, bucketname text, limits integer DEFAULT 100, levels integer DEFAULT 1, offsets integer DEFAULT 0, search text DEFAULT ''::text, sortcolumn text DEFAULT 'name'::text, sortorder text DEFAULT 'asc'::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | record        |
| storage        | search_legacy_v1                          | prefix text, bucketname text, limits integer DEFAULT 100, levels integer DEFAULT 1, offsets integer DEFAULT 0, search text DEFAULT ''::text, sortcolumn text DEFAULT 'name'::text, sortorder text DEFAULT 'asc'::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | record        |
| storage        | search_v1_optimised                       | prefix text, bucketname text, limits integer DEFAULT 100, levels integer DEFAULT 1, offsets integer DEFAULT 0, search text DEFAULT ''::text, sortcolumn text DEFAULT 'name'::text, sortorder text DEFAULT 'asc'::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | record        |
| storage        | search_v2                                 | prefix text, bucket_name text, limits integer DEFAULT 100, levels integer DEFAULT 1, start_after text DEFAULT ''::text, sort_order text DEFAULT 'asc'::text, sort_column text DEFAULT 'name'::text, sort_column_after text DEFAULT ''::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | record        |
| storage        | update_updated_at_column                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger       |
| suppliers      | obter_sla_efetivo                         | p_laboratorio_id uuid, p_tipo_produto_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | int4          |
| vault          | _crypto_aead_det_decrypt                  | message bytea, additional bytea, key_id bigint, context bytea DEFAULT '\x7067736f6469756d'::bytea, nonce bytea DEFAULT NULL::bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | bytea         |
| vault          | _crypto_aead_det_encrypt                  | message bytea, additional bytea, key_id bigint, context bytea DEFAULT '\x7067736f6469756d'::bytea, nonce bytea DEFAULT NULL::bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | bytea         |
| vault          | _crypto_aead_det_noncegen                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | bytea         |
| vault          | create_secret                             | new_secret text, new_name text DEFAULT NULL::text, new_description text DEFAULT ''::text, new_key_id uuid DEFAULT NULL::uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | uuid          |
| vault          | update_secret                             | secret_id uuid, new_secret text DEFAULT NULL::text, new_name text DEFAULT NULL::text, new_description text DEFAULT NULL::text, new_key_id uuid DEFAULT NULL::uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | void          |


-- 7. LISTAR TRIGGERS
SELECT 
    event_object_schema as schema,
    event_object_table as table_name,
    trigger_name,
    event_manipulation,
    action_timing,
    action_statement
FROM information_schema.triggers
WHERE event_object_schema NOT IN ('information_schema', 'pg_catalog')
ORDER BY schema, table_name;

| schema       | table_name                    | trigger_name                       | event_manipulation | action_timing | action_statement                                           |
| ------------ | ----------------------------- | ---------------------------------- | ------------------ | ------------- | ---------------------------------------------------------- |
| commercial   | precos_base                   | tr_precos_log_alteracao            | UPDATE             | AFTER         | EXECUTE FUNCTION commercial.log_preco_alteracao()          |
| commercial   | precos_base                   | tr_precos_base_updated_at          | UPDATE             | BEFORE        | EXECUTE FUNCTION meta_system.update_updated_at_column()    |
| integration  | eventos_webhook               | tr_webhook_updated_at              | UPDATE             | BEFORE        | EXECUTE FUNCTION meta_system.update_updated_at_column()    |
| lens_catalog | lentes                        | tr_lentes_updated_at               | UPDATE             | BEFORE        | EXECUTE FUNCTION meta_system.update_updated_at_column()    |
| lens_catalog | marcas                        | tr_marcas_updated_at               | UPDATE             | BEFORE        | EXECUTE FUNCTION meta_system.update_updated_at_column()    |
| meta_system  | tenants                       | tr_tenants_updated_at              | UPDATE             | BEFORE        | EXECUTE FUNCTION meta_system.update_updated_at_column()    |
| public       | usuarios                      | trigger_usuarios_updated_at        | UPDATE             | BEFORE        | EXECUTE FUNCTION update_updated_at_column()                |
| realtime     | subscription                  | tr_check_filters                   | INSERT             | BEFORE        | EXECUTE FUNCTION realtime.subscription_check_filters()     |
| realtime     | subscription                  | tr_check_filters                   | UPDATE             | BEFORE        | EXECUTE FUNCTION realtime.subscription_check_filters()     |
| storage      | buckets                       | enforce_bucket_name_length_trigger | UPDATE             | BEFORE        | EXECUTE FUNCTION storage.enforce_bucket_name_length()      |
| storage      | buckets                       | enforce_bucket_name_length_trigger | INSERT             | BEFORE        | EXECUTE FUNCTION storage.enforce_bucket_name_length()      |
| storage      | objects                       | update_objects_updated_at          | UPDATE             | BEFORE        | EXECUTE FUNCTION storage.update_updated_at_column()        |
| storage      | objects                       | objects_insert_create_prefix       | INSERT             | BEFORE        | EXECUTE FUNCTION storage.objects_insert_prefix_trigger()   |
| storage      | objects                       | objects_delete_delete_prefix       | DELETE             | AFTER         | EXECUTE FUNCTION storage.delete_prefix_hierarchy_trigger() |
| storage      | objects                       | objects_update_create_prefix       | UPDATE             | BEFORE        | EXECUTE FUNCTION storage.objects_update_prefix_trigger()   |
| storage      | prefixes                      | prefixes_delete_hierarchy          | DELETE             | AFTER         | EXECUTE FUNCTION storage.delete_prefix_hierarchy_trigger() |
| storage      | prefixes                      | prefixes_create_hierarchy          | INSERT             | BEFORE        | EXECUTE FUNCTION storage.prefixes_insert_trigger()         |
| suppliers    | laboratorio_sla_personalizado | tr_lab_sla_updated_at              | UPDATE             | BEFORE        | EXECUTE FUNCTION meta_system.update_updated_at_column()    |
| suppliers    | tipos_produto_config          | tr_tipos_produto_updated_at        | UPDATE             | BEFORE        | EXECUTE FUNCTION meta_system.update_updated_at_column()    |
| suppliers    | tratamentos_config            | tr_tratamentos_updated_at          | UPDATE             | BEFORE        | EXECUTE FUNCTION meta_system.update_updated_at_column()    |


-- 8. ESTAT√çSTICAS DE LINHAS (Registros por Tabela)
-- √ötil para saber quais tabelas t√™m dados
SELECT 
    schemaname, 
    relname as tabela, 
    n_live_tup as total_registros
FROM pg_stat_user_tables 
ORDER BY n_live_tup DESC;


| schemaname   | tabela                        | total_registros |
| ------------ | ----------------------------- | --------------- |
| suppliers    | laboratorio_sla_personalizado | 56              |
| suppliers    | tipos_produto_config          | 19              |
| suppliers    | laboratorios                  | 11              |
| suppliers    | tratamentos_config            | 10              |
| auth         | mfa_challenges                | 0               |
| meta_system  | tenants                       | 0               |
| auth         | mfa_amr_claims                | 0               |
| analytics    | metricas_kpi                  | 0               |
| auth         | sso_domains                   | 0               |
| public       | usuarios                      | 0               |
| scoring      | scores_laboratorios           | 0               |
| scoring      | historico_scores              | 0               |
| orders       | historico_status              | 0               |
| auth         | oauth_consents                | 0               |
| auth         | audit_log_entries             | 0               |
| storage      | buckets_vectors               | 0               |
| public       | consultas_lens_log            | 0               |
| auth         | one_time_tokens               | 0               |
| auth         | saml_providers                | 0               |
| suppliers    | historico_produtos            | 0               |
| public       | relatorios                    | 0               |
| storage      | migrations                    | 0               |
| public       | clientes                      | 0               |
| auth         | flow_state                    | 0               |
| storage      | prefixes                      | 0               |
| realtime     | schema_migrations             | 0               |
| vault        | secrets                       | 0               |
| meta_system  | feature_flags                 | 0               |
| public       | logs                          | 0               |
| analytics    | execucoes_relatorios          | 0               |
| auth         | sso_providers                 | 0               |
| orders       | decisoes_lentes               | 0               |
| lens_catalog | lentes_canonicas              | 0               |
| auth         | identities                    | 0               |
| storage      | s3_multipart_uploads          | 0               |
| orders       | alternativas_cotacao          | 0               |
| auth         | oauth_authorizations          | 0               |
| scoring      | avaliacoes_laboratorios       | 0               |
| meta_system  | parametros_tenant             | 0               |
| analytics    | valores_kpi                   | 0               |
| logistics    | tabela_prazos                 | 0               |
| storage      | objects                       | 0               |
| lens_catalog | homologacao_marca_propria     | 0               |
| integration  | eventos_webhook               | 0               |
| auth         | users                         | 0               |
| integration  | clientes_api                  | 0               |
| scoring      | criterios_scoring             | 0               |
| commercial   | precos_base                   | 0               |
| auth         | mfa_factors                   | 0               |
| orders       | criterios_decisao             | 0               |
| auth         | saml_relay_states             | 0               |
| suppliers    | marcas                        | 0               |
| commercial   | historico_precos              | 0               |
| auth         | refresh_tokens                | 0               |
| realtime     | subscription                  | 0               |
| analytics    | alertas_analytics             | 0               |
| realtime     | messages                      | 0               |
| public       | produtos_bestlens             | 0               |
| storage      | vector_indexes                | 0               |
| storage      | buckets_analytics             | 0               |
| auth         | oauth_client_states           | 0               |
| lens_catalog | grades_disponibilidade        | 0               |
| auth         | oauth_clients                 | 0               |
| auth         | schema_migrations             | 0               |
| auth         | sessions                      | 0               |
| public       | lojas                         | 0               |
| public       | configuracoes                 | 0               |
| logistics    | historico_entregas            | 0               |
| analytics    | relatorios_configuracao       | 0               |
| lens_catalog | lentes                        | 0               |
| auth         | instances                     | 0               |
| logistics    | zonas_entrega                 | 0               |
| suppliers    | produtos_laboratorio          | 0               |
| lens_catalog | marcas                        | 0               |
| commercial   | descontos                     | 0               |
| storage      | s3_multipart_uploads_parts    | 0               |
| storage      | buckets                       | 0               |
| lens_catalog | lentes_premium                | 0               |